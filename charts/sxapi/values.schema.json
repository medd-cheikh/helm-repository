{
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "required": [
        "context",
        "sxapi"
    ],
    "properties": {
        "context": {
            "type": "object",
            "title": "Deployment context",
            "description": "Properties of the deployment context.",
            "required": [
                "scope",
                "cluster",
                "environment",
                "component",
                "app",
                "version"
            ],
            "properties": {
                "scope": {
                    "type": "string",
                    "title": "Scope name",
                    "description": "Name of the global scope for this application. Describe an organisational tenant.",
                    "default": "myscope",
                    "examples": [
                        "myscope",
                        "mycustomer"
                    ]
                },
                "cluster": {
                    "type": "string",
                    "title": "Cluster name",
                    "description": "Name of the cluster running this application. Describe a platform tenant.",
                    "default": "localhost",
                    "examples": [
                        "mycluster",
                        "localhost"
                    ]
                },
                "environment": {
                    "type": "string",
                    "title": "Environement name",
                    "description": "Name of the environement for this application. Describe a stage tenant.",
                    "default": "dev",
                    "examples": [
                        "dev",
                        "factory",
                        "preprod",
                        "prod"
                    ]
                },
                "component": {
                    "type": "string",
                    "title": "Component name",
                    "description": "Name of the component consisting of this application. Describe a logical tenant.",
                    "default": "sxapi",
                    "examples": [
                        "mycomp",
                        "myservice"
                    ]
                },
                "app": {
                    "type": "string",
                    "title": "Application name",
                    "description": "Name of the application name. Describe a functionnal tenant.",
                    "default": "default-sxapi",
                    "examples": [
                        "myapp",
                        "mymicroservice"
                    ]
                },
                "version": {
                    "type": "string",
                    "title": "Version name",
                    "description": "Name of the application version. Default use Chart appVersion.",
                    "default": "0.0.1",
                    "examples": [
                        "0.0.1",
                        "0.1",
                        "0.0.1-snapshot",
                        "0.0.1-202110300900"
                    ]
                }
            }
        },
        "sxapi": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "string",
                    "title": "Application data",
                    "description": "List of file and content used to configure SXAPI application. Must contain at list one file named sxapi.yml with content structured as described in the sxapi documentation that could be found at https://sxapi-core.readthedocs.io/en/latest/guides/2.Configure",
                    "examples": [
                        "sxapi.yml: |-\n  name: default\n  version: '0.3.58'\n  server:\n    port: '8077'\n    endpoints:\n    - path: '/'\n      body: |-\n        <html><body><h1>Default</h1></body></html>"
                    ]
                },
                "debug": {
                    "type": "boolean",
                    "title": "Enable debug",
                    "description": "Enable the debug mode for sxapi application.",
                    "default": false
                },
                "expose": {
                    "type": "object",
                    "title": "Exposing the application",
                    "description": "Configuration of the application external access.",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enable",
                            "description": "Enable the application exposition outside the container.",
                            "default": false
                        },
                        "kind": {
                            "type": "string",
                            "enum": ["route", "ingress"],
                            "title": "Provider",
                            "description": "Name of the resource used to expose the application to the outside world.",
                            "default": "route",
                            "examples": [
                                "route",
                                "ingress"
                            ]
                        }
                    }
                },
                "profile": {
                    "type": "string",
                    "title": "Execution profile",
                    "description": "Define the NPM profile to execute when starting the container.",
                    "default": "prod:start",
                    "examples": [
                        "dev:start",
                        "prod:start",
                        "start"
                    ]
                },
                "replicas": {
                    "type": "integer",
                    "minimum": 0,
                    "title": "Replicas number",
                    "description": "Define the number of replicas for this sxapi instance.",
                    "default": 1
                },
                "service": {
                    "type": "object",
                    "title": "Service",
                    "description": "Define if application should be exposed internaly.",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "title": "Enable",
                            "description": "Enable the creation of the service for internal application exposure.",
                            "default": true
                        }
                    }
                },
                "version": {
                    "type": "string",
                    "enum": ["latest", "testing", "0.3.58", "0.3.57"],
                    "title": "SXAPI Version",
                    "description": "Version of the SXAPI framework used to run this application.",
                    "default": "latest",
                    "examples": [
                        "latest",
                        "testing",
                        "0.3.58",
                        "0.3.57",
                        "0.3.55"
                    ]
                }
            }
        }
    }
}
