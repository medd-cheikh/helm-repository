# Default values for configuration of a STARTX cluster
# see values.yaml for explanation on each params
context: 
  scope: startx
  cluster: default
  environment: infra
  component: config
  app: startx-machine

cluster:
  id: startx-xyzab
  region: eu-west-1
  autoscaler: 
    enabled: false
    spec: |
      podPriorityThreshold: -10 
      resourceLimits:
        maxNodesTotal: 15
        cores:
          min: 22
          max: 600
        memory:
          min: 72
          max: 1200 
        gpus:
          - type: nvidia.com/gpu 
            min: 0 
            max: 2
          - type: amd.com/gpu 
            min: 0 
            max: 2 
      scaleDown: 
        enabled: true 
        delayAfterAdd: 5m 
        delayAfterDelete: 3m 
        delayAfterFailure: 40s 
        unneededTime: 60s 

machineHealthCheck:
  enabled: false
  list: 
  - name: master
    type: master
    maxUnhealthy: 40%
    timeouts: 300s
  - name: a
    type: worker
    maxUnhealthy: 40%
    timeouts: 300s
  - name: b
    type: worker
    maxUnhealthy: 40%
    timeouts: 300s
  - name: c
    type: worker
    maxUnhealthy: 40%
    timeouts: 300s

machineAutoscaler: 
  enabled: false
  list: 
  - name: a
    minReplicas: 2
    maxReplicas: 6
  - name: b
    minReplicas: 2
    maxReplicas: 6
  - name: c
    minReplicas: 2
    maxReplicas: 6
