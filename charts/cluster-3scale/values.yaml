# Default values for cluster-3scale.

# Application deployment context
context: 
  # Name of the global scope for this application (organisational tenant)
  scope: default
  # Name of the cluster running this application (plateform tenant)
  cluster: localhost
  # Name of the environement for this application (ex: dev, factory, preprod or prod)
  environment: dev
  # Component name of this application (logical tenant)
  component: infra
  # Application name (functionnal tenant, default use Chart name)
  app: startx-infra
  # Version name of this application (default use Chart appVersion)
  # version: 0.0.3

# Operator configuration
operator:
  # Enable the configuration of the operator
  enabled: true
  # The operator namespace where objects goes to
  namespace: openshift-operators
  # The operator marketplace namespace where objects goes to
  marketplace: openshift-marketplace
  # Name of the channel in the operator marketplace
  channel: threescale-2.9
  # CSV base name
  operator: 3scale-operator
  # CSV version
  version: "0.6.0" 
# Deploy an API manager
manager:
  # Enable the configuration of the API manager
  enabled: true
# RHN informations for the container catalog
rhn:
  # Enable the configuration of the rhn account for image pull
  enabled: true
  # Redhat Network access user to the RH container catalog
  user: rhnuser
  # Redhat Network access password to the Rh container catalog
  pwd: rhnpwd


# Configuration of the project namespace
project: 
  context: 
    scope: default
    cluster: localhost
    environment: dev
    component: infra
    app: startx-infra
  project: 
    type: project
    name: startx-3scale
    display_name: STARTX Infra - 3SCALE
    description: STARTX 3Scale enterprise api-management & control plane
  rbac: 
    enabled: true
    groups: 
    - id: dev
      name: dev
      role: view
  networkpolicy: 
    enabled: true
    rules: 
    - id: allow-from-openshift-ingress
      spec: |
        podSelector:
          matchLabels:
            app: 3scale
        ingress:
          - from:
              - namespaceSelector: {}
  limits: 
    enabled: true
    rules:  |
      limits:
        - type: "Pod"
          min:
            cpu: 50m
            memory: 32Mi
          max:
            cpu: "10"
            memory: 34Gi
        - type: "Container"
          default:
            cpu: 400m
            memory: 512Mi
          defaultRequest:
            cpu: 100m
            memory: 128Mi
          min:
            cpu: 50m
            memory: 32Mi
          max:
            cpu: "10"
            memory: 32Gi
  quotas: 
    enabled: true
    rules:  |
      hard:
        limits.cpu: "25"
        limits.memory: "120Gi"
        requests.cpu: "6"
        requests.memory: "10000Mi"
        requests.storage: "10Gi"
        persistentvolumeclaims: "4"
        ephemeral-storage: "0" 
        pods: "25"
        services: "20"
        services.loadbalancers: "0"
        services.nodeports: "0"
        secrets: "50"
        configmaps: "16"
        replicationcontrollers: "30"
        openshift.io/imagestreams: "25"
        count/daemonsets.apps: "0"
        count/replicasets.apps: "6"
        count/deployments.apps: "2"
