{{- if .Values.ansibleSecrets -}}{{- if .Values.ansibleSecrets.enabled -}}
{{- $defaultns := .Values.project.project.name | default "aap" -}}
{{ range .Values.ansibleSecrets.list }}
{{- $name := .name | default "default-aap-token" -}}
{{- $type := .type | default "aaptoken" -}}
{{- $namespace := .namespace | default $defaultns -}}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ $name | quote }}
  namespace: "{{- $namespace -}}"
  labels:
    {{- include "cluster-ansible.labels" $ | nindent 4 }}
    app.kubernetes.io/name: "{{- $name -}}-secret"
  annotations:
    {{- include "cluster-ansible.annotations" $ | nindent 4 }}
    argocd.argoproj.io/sync-wave: "2"
stringData:
{{- if eq $type "sshkey" }}
  id_rsa: {{ .id_rsa | default "YOUR_RSA_PRIVATE_KEY" | quote }}
{{- else }}
  token: {{ .token | default "XXX_MY_TOKEN_XXXX" | quote }}
  host: {{ .host | default "http://awx-demo-service.awx.svc.cluster.local:80" | quote }}
{{ end }}
{{ end }}
{{- end -}}{{- end -}}
